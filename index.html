<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kids Game Center</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    .player-card {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }

    .player-card:hover {
      transform: translateY(-10px) scale(1.05);
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    }

    .balloon {
      position: absolute;
      cursor: pointer;
      transition: none;
    }

    .balloon:hover {
      transform: scale(1.1);
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) translateX(0); }
      25% { transform: translateY(-10px) translateX(5px); }
      50% { transform: translateY(-5px) translateX(-5px); }
      75% { transform: translateY(-15px) translateX(3px); }
    }

    .floating {
      animation: float 3s ease-in-out infinite;
    }

    @keyframes pop {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.5); opacity: 0.5; }
      100% { transform: scale(0); opacity: 0; }
    }

    .popping {
      animation: pop 0.3s ease-out forwards;
    }

    @keyframes celebrate {
      0%, 100% { transform: scale(1) rotate(0deg); }
      25% { transform: scale(1.2) rotate(-5deg); }
      75% { transform: scale(1.2) rotate(5deg); }
    }

    .celebrate {
      animation: celebrate 0.5s ease;
    }

    @keyframes levelUp {
      0% { transform: scale(0.5); opacity: 0; }
      50% { transform: scale(1.2); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }

    .level-up {
      animation: levelUp 0.5s ease;
    }

    .obstacle {
      position: absolute;
      pointer-events: none;
      font-size: 60px;
      user-select: none;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .pulse {
      animation: pulse 2s ease-in-out infinite;
    }

    .hidden {
      display: none !important;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="w-full h-full relative overflow-hidden"><!-- Player Selection Screen -->
   <div id="player-selection" class="w-full h-full flex flex-col items-center justify-center p-8">
    <h1 id="welcome-title" class="text-7xl font-bold text-center mb-6 pulse">üéÆ Pilih Pemain üéÆ</h1>
    <p class="text-3xl text-center mb-12">Siapa yang mau main hari ini?</p>
    <div class="flex gap-12 flex-wrap justify-center max-w-5xl">
     <div id="player1-card" class="player-card rounded-3xl p-10 shadow-2xl text-center" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-width: 300px;">
      <div class="text-8xl mb-6">
       üë¶
      </div>
      <h2 id="player1-name" class="text-4xl font-bold text-white mb-4">Tristan Khalil Athalla</h2>
      <p class="text-2xl text-white mb-2">Kelas 4 SD</p>
      <p class="text-xl text-white opacity-90">Kuis Matematika</p>
     </div>
     <div id="player2-card" class="player-card rounded-3xl p-10 shadow-2xl text-center" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); min-width: 300px;">
      <div class="text-8xl mb-6">
       üë∂
      </div>
      <h2 id="player2-name" class="text-4xl font-bold text-white mb-4">Leander Damar Wihanjoyo</h2>
      <p class="text-2xl text-white mb-2">3 Tahun</p>
      <p class="text-xl text-white opacity-90">Game Tembak Balon</p>
     </div>
    </div>
   </div><!-- Math Quiz Game (Tristan) -->
   <div id="math-game" class="hidden w-full h-full flex flex-col">
    <div class="w-full p-4 md:p-6 z-10 flex-shrink-0"><button id="back-from-math" class="text-lg md:text-xl font-bold px-4 py-2 md:px-6 md:py-3 rounded-xl text-white shadow-lg hover:shadow-xl transition-all mb-3">‚Üê Kembali</button>
     <h1 id="math-title" class="text-2xl md:text-3xl font-bold text-center mb-3">üßÆ Kuis Matematika Kelas 4</h1>
     <div class="flex justify-center gap-4 md:gap-6 items-center flex-wrap text-lg md:text-xl">
      <div id="math-score-label" class="font-bold">
       Skor: <span id="math-score">0</span>
      </div>
      <div id="math-question-label" class="font-bold">
       Soal: <span id="math-question-num">1</span>/10
      </div>
      <div id="math-time-label" class="font-bold">
       Waktu: <span id="math-time">60</span>s
      </div>
     </div>
    </div>
    <div class="flex-1 w-full flex items-center justify-center p-4 overflow-auto">
     <div id="math-quiz-area" class="text-center p-6 md:p-12 rounded-3xl shadow-2xl max-w-3xl w-full">
      <div id="question-display" class="text-4xl md:text-6xl font-bold mb-8 md:mb-12"></div>
      <div id="answer-options" class="grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6"></div>
     </div>
    </div>
    <div id="math-game-over" class="hidden absolute inset-0 flex items-center justify-center z-20 p-4" style="background: rgba(0,0,0,0.85);">
     <div class="text-center p-8 md:p-12 rounded-3xl shadow-2xl max-w-lg w-full" style="background: rgba(255,255,255,0.95);">
      <h2 class="text-5xl md:text-7xl font-bold mb-4 md:mb-6">üéâ Selesai!</h2>
      <p class="text-3xl md:text-4xl mb-3 md:mb-4">Skor: <span id="math-final-score" class="font-bold">0</span>/10</p>
      <p class="text-2xl md:text-3xl mb-6 md:mb-8"><span id="math-grade"></span></p><button id="math-restart-btn" class="text-2xl md:text-3xl font-bold px-8 py-4 md:px-10 md:py-5 rounded-xl text-white shadow-lg hover:shadow-xl transition-all">Main Lagi!</button>
     </div>
    </div>
   </div><!-- Balloon Game (Leander) -->
   <div id="balloon-game" class="hidden w-full h-full relative overflow-hidden flex flex-col">
    <div class="w-full p-4 md:p-6 z-10 flex-shrink-0">
     <div class="flex justify-between items-center mb-3 flex-wrap gap-2"><button id="back-from-balloon" class="text-lg md:text-2xl font-bold px-4 py-2 md:px-6 md:py-3 rounded-xl text-white shadow-lg hover:shadow-xl transition-all">‚Üê Kembali</button>
      <h1 id="balloon-title" class="text-3xl md:text-5xl font-bold">üéà Tembak Balon!</h1>
      <div></div>
     </div>
     <p id="balloon-instruction" class="text-base md:text-xl text-center mb-3">Klik balon untuk meletuskannya! Hindari rintangan!</p>
     <div class="flex justify-center gap-4 md:gap-8 items-center flex-wrap text-xl md:text-3xl">
      <div id="balloon-score-label" class="font-bold">
       Skor: <span id="balloon-score">0</span>
      </div>
      <div id="balloon-level-label" class="font-bold">
       Level: <span id="balloon-level">1</span>
      </div>
      <div id="balloon-time-label" class="font-bold">
       Waktu: <span id="balloon-time">60</span>s
      </div>
     </div>
    </div>
    <div id="balloon-game-area" class="flex-1 w-full relative"></div>
    <div id="balloon-game-over" class="hidden absolute inset-0 flex items-center justify-center z-20 p-4" style="background: rgba(0,0,0,0.8);">
     <div class="text-center p-6 md:p-8 rounded-2xl max-w-lg w-full" style="background: rgba(255,255,255,0.95);">
      <h2 class="text-4xl md:text-6xl font-bold mb-3 md:mb-4">üéÆ Game Over!</h2>
      <p class="text-2xl md:text-3xl mb-2">Skor Akhir: <span id="balloon-final-score" class="font-bold">0</span></p>
      <p class="text-xl md:text-2xl mb-4 md:mb-6">Level: <span id="balloon-final-level" class="font-bold">1</span></p><button id="balloon-restart-btn" class="text-2xl md:text-3xl font-bold px-6 py-3 md:px-8 md:py-4 rounded-xl text-white shadow-lg hover:shadow-xl transition-all">Main Lagi!</button>
     </div>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      background_color: "#4F46E5",
      selection_text_color: "#FEF3C7",
      math_bg_color: "#10B981",
      balloon_bg_color: "#7C3AED",
      button_color: "#EF4444",
      font_family: "Comic Sans MS",
      font_size: 16,
      welcome_title: "üéÆ Pilih Pemain üéÆ",
      player1_name: "Tristan Khalil Athalla",
      player2_name: "Leander Damar Wihanjoyo",
      math_game_title: "üßÆ Kuis Matematika Kelas 4",
      balloon_game_title: "üéà Tembak Balon!"
    };

    let currentScreen = 'selection';
    
    // Math Quiz Variables
    let mathScore = 0;
    let currentQuestion = 0;
    let currentAnswer = 0;
    const totalQuestions = 10;
    let mathTimeLeft = 60;
    let mathTimerInterval;

    // Balloon Game Variables
    let balloonScore = 0;
    let balloonLevel = 1;
    let timeLeft = 60;
    let balloons = [];
    let obstacles = [];
    let gameInterval;
    let timerInterval;
    let balloonInterval;
    let obstacleInterval;
    let isBalloonGameOver = false;

    // Screen Elements
    const playerSelection = document.getElementById('player-selection');
    const mathGame = document.getElementById('math-game');
    const balloonGame = document.getElementById('balloon-game');

    // Player Cards
    const player1Card = document.getElementById('player1-card');
    const player2Card = document.getElementById('player2-card');

    // Navigation
    const backFromMath = document.getElementById('back-from-math');
    const backFromBalloon = document.getElementById('back-from-balloon');

    // Math Quiz Generation
    function generateQuestion() {
      const operations = [
        { type: 'add', min: 10, max: 999 },
        { type: 'subtract', min: 10, max: 999 },
        { type: 'multiply', min: 2, max: 12 },
        { type: 'divide', min: 2, max: 12 }
      ];
      
      const op = operations[Math.floor(Math.random() * operations.length)];
      let num1, num2, answer, question;
      
      switch(op.type) {
        case 'add':
          num1 = Math.floor(Math.random() * (op.max - op.min)) + op.min;
          num2 = Math.floor(Math.random() * (op.max - op.min)) + op.min;
          answer = num1 + num2;
          question = `${num1} + ${num2} = ?`;
          break;
        case 'subtract':
          num1 = Math.floor(Math.random() * (op.max - op.min)) + op.min;
          num2 = Math.floor(Math.random() * num1);
          answer = num1 - num2;
          question = `${num1} - ${num2} = ?`;
          break;
        case 'multiply':
          num1 = Math.floor(Math.random() * (op.max - op.min)) + op.min;
          num2 = Math.floor(Math.random() * (op.max - op.min)) + op.min;
          answer = num1 * num2;
          question = `${num1} √ó ${num2} = ?`;
          break;
        case 'divide':
          num2 = Math.floor(Math.random() * (op.max - op.min)) + op.min;
          num1 = num2 * (Math.floor(Math.random() * (op.max - op.min)) + op.min);
          answer = num1 / num2;
          question = `${num1} √∑ ${num2} = ?`;
          break;
      }
      
      return { question, answer };
    }

    function displayQuestion() {
      const questionData = generateQuestion();
      currentAnswer = questionData.answer;
      
      document.getElementById('question-display').textContent = questionData.question;
      document.getElementById('math-question-num').textContent = currentQuestion + 1;
      
      const options = [currentAnswer];
      while(options.length < 4) {
        const offset = Math.floor(Math.random() * 20) - 10;
        const wrongAnswer = currentAnswer + offset;
        if(wrongAnswer > 0 && !options.includes(wrongAnswer)) {
          options.push(wrongAnswer);
        }
      }
      
      options.sort(() => Math.random() - 0.5);
      
      const answerOptions = document.getElementById('answer-options');
      answerOptions.innerHTML = '';
      
      options.forEach(option => {
        const btn = document.createElement('button');
        btn.textContent = option;
        btn.className = 'text-2xl md:text-4xl font-bold px-6 py-4 md:px-12 md:py-8 rounded-2xl text-white shadow-lg hover:shadow-xl transition-all transform hover:scale-105';
        btn.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
        btn.addEventListener('click', () => checkAnswer(option));
        answerOptions.appendChild(btn);
      });
    }

    function checkAnswer(selected) {
      if(selected === currentAnswer) {
        mathScore++;
        document.getElementById('math-score').textContent = mathScore;
        document.getElementById('math-score').classList.add('celebrate');
        setTimeout(() => document.getElementById('math-score').classList.remove('celebrate'), 500);
      }
      
      currentQuestion++;
      
      if(currentQuestion < totalQuestions) {
        displayQuestion();
      } else {
        endMathGame();
      }
    }

    function updateMathTimer() {
      mathTimeLeft--;
      document.getElementById('math-time').textContent = mathTimeLeft;
      
      if (mathTimeLeft <= 0) {
        endMathGame();
      }
    }

    function endMathGame() {
      if (mathTimerInterval) {
        clearInterval(mathTimerInterval);
      }
      
      document.getElementById('math-final-score').textContent = mathScore;
      
      let grade = '';
      if(mathScore >= 9) grade = 'üèÜ Sempurna! Kamu Hebat!';
      else if(mathScore >= 7) grade = '‚≠ê Bagus Sekali!';
      else if(mathScore >= 5) grade = 'üëç Lumayan!';
      else grade = 'üí™ Tetap Semangat!';
      
      document.getElementById('math-grade').textContent = grade;
      document.getElementById('math-game-over').classList.remove('hidden');
    }

    function startMathGame() {
      mathScore = 0;
      currentQuestion = 0;
      mathTimeLeft = 60;
      
      document.getElementById('math-score').textContent = mathScore;
      document.getElementById('math-time').textContent = mathTimeLeft;
      document.getElementById('math-game-over').classList.add('hidden');
      
      if (mathTimerInterval) {
        clearInterval(mathTimerInterval);
      }
      mathTimerInterval = setInterval(updateMathTimer, 1000);
      
      displayQuestion();
    }

    document.getElementById('math-restart-btn').addEventListener('click', startMathGame);

    // Balloon Game Functions
    function createBalloon() {
      if (isBalloonGameOver) return;
      
      const balloon = document.createElement('div');
      const size = 60 + Math.random() * 40;
      const x = Math.random() * (window.innerWidth - size);
      const y = window.innerHeight + 100;
      
      balloon.className = 'balloon floating';
      balloon.style.width = size + 'px';
      balloon.style.height = size * 1.3 + 'px';
      balloon.style.left = x + 'px';
      balloon.style.bottom = '-150px';
      balloon.style.fontSize = size + 'px';
      
      const balloonEmojis = ['üéà', 'üéà', 'üéà', 'üéà', 'üéà'];
      balloon.textContent = balloonEmojis[Math.floor(Math.random() * balloonEmojis.length)];
      
      document.getElementById('balloon-game-area').appendChild(balloon);
      
      const speed = 1 + (balloonLevel * 0.3) + Math.random() * 0.5;
      
      const balloonData = {
        element: balloon,
        x: x,
        y: y,
        size: size,
        speed: speed
      };
      
      balloons.push(balloonData);
      
      balloon.addEventListener('click', () => popBalloon(balloonData));
    }

    function createObstacle() {
      if (isBalloonGameOver || balloonLevel < 2) return;
      
      const obstacle = document.createElement('div');
      const size = 50 + Math.random() * 30;
      const x = Math.random() * (window.innerWidth - size);
      
      obstacle.className = 'obstacle';
      obstacle.style.left = x + 'px';
      obstacle.style.bottom = '-100px';
      obstacle.style.fontSize = size + 'px';
      
      const obstacleEmojis = ['‚òÅÔ∏è', '‚≠ê', '‚ú®', 'üí®'];
      obstacle.textContent = obstacleEmojis[Math.floor(Math.random() * obstacleEmojis.length)];
      
      document.getElementById('balloon-game-area').appendChild(obstacle);
      
      const speed = 0.8 + (balloonLevel * 0.2) + Math.random() * 0.4;
      
      obstacles.push({
        element: obstacle,
        x: x,
        y: 0,
        size: size,
        speed: speed
      });
    }

    function popBalloon(balloonData) {
      if (isBalloonGameOver) return;
      
      balloonScore += 10 * balloonLevel;
      document.getElementById('balloon-score').textContent = balloonScore;
      document.getElementById('balloon-score').classList.add('celebrate');
      setTimeout(() => document.getElementById('balloon-score').classList.remove('celebrate'), 500);
      
      balloonData.element.classList.remove('floating');
      balloonData.element.classList.add('popping');
      
      setTimeout(() => {
        balloonData.element.remove();
      }, 300);
      
      const index = balloons.indexOf(balloonData);
      if (index > -1) {
        balloons.splice(index, 1);
      }
      
      if (balloonScore >= balloonLevel * 100 && balloonScore % 100 === 0) {
        levelUp();
      }
    }

    function levelUp() {
      balloonLevel++;
      document.getElementById('balloon-level').textContent = balloonLevel;
      document.getElementById('balloon-level').classList.add('level-up');
      setTimeout(() => document.getElementById('balloon-level').classList.remove('level-up'), 500);
      
      timeLeft += 15;
      
      clearInterval(balloonInterval);
      const newBalloonSpeed = Math.max(500, 1200 - (balloonLevel * 150));
      balloonInterval = setInterval(createBalloon, newBalloonSpeed);
      
      if (balloonLevel >= 2 && !obstacleInterval) {
        obstacleInterval = setInterval(createObstacle, 2000);
      }
    }

    function updateBalloonGame() {
      if (isBalloonGameOver) return;
      
      balloons.forEach((balloon, index) => {
        const currentBottom = parseFloat(balloon.element.style.bottom) || -150;
        const newBottom = currentBottom + balloon.speed;
        balloon.element.style.bottom = newBottom + 'px';
        
        if (newBottom > window.innerHeight + 100) {
          balloon.element.remove();
          balloons.splice(index, 1);
        }
      });
      
      obstacles.forEach((obstacle, index) => {
        const currentBottom = parseFloat(obstacle.element.style.bottom) || -100;
        const newBottom = currentBottom + obstacle.speed;
        obstacle.element.style.bottom = newBottom + 'px';
        
        if (newBottom > window.innerHeight + 100) {
          obstacle.element.remove();
          obstacles.splice(index, 1);
        }
      });
    }

    function updateTimer() {
      if (isBalloonGameOver) return;
      
      timeLeft--;
      document.getElementById('balloon-time').textContent = timeLeft;
      
      if (timeLeft <= 0) {
        endBalloonGame();
      }
    }

    function endBalloonGame() {
      isBalloonGameOver = true;
      
      clearInterval(gameInterval);
      clearInterval(timerInterval);
      clearInterval(balloonInterval);
      if (obstacleInterval) clearInterval(obstacleInterval);
      
      document.getElementById('balloon-final-score').textContent = balloonScore;
      document.getElementById('balloon-final-level').textContent = balloonLevel;
      document.getElementById('balloon-game-over').classList.remove('hidden');
    }

    function startBalloonGame() {
      balloonScore = 0;
      balloonLevel = 1;
      timeLeft = 60;
      isBalloonGameOver = false;
      
      document.getElementById('balloon-score').textContent = balloonScore;
      document.getElementById('balloon-level').textContent = balloonLevel;
      document.getElementById('balloon-time').textContent = timeLeft;
      
      balloons.forEach(b => b.element.remove());
      obstacles.forEach(o => o.element.remove());
      balloons = [];
      obstacles = [];
      
      document.getElementById('balloon-game-over').classList.add('hidden');
      
      if (gameInterval) clearInterval(gameInterval);
      if (timerInterval) clearInterval(timerInterval);
      if (balloonInterval) clearInterval(balloonInterval);
      if (obstacleInterval) clearInterval(obstacleInterval);
      
      gameInterval = setInterval(updateBalloonGame, 1000 / 60);
      timerInterval = setInterval(updateTimer, 1000);
      balloonInterval = setInterval(createBalloon, 1200);
    }

    document.getElementById('balloon-restart-btn').addEventListener('click', startBalloonGame);

    // Screen Navigation
    player1Card.addEventListener('click', () => {
      playerSelection.classList.add('hidden');
      mathGame.classList.remove('hidden');
      currentScreen = 'math';
      startMathGame();
    });

    player2Card.addEventListener('click', () => {
      playerSelection.classList.add('hidden');
      balloonGame.classList.remove('hidden');
      currentScreen = 'balloon';
      startBalloonGame();
    });

    backFromMath.addEventListener('click', () => {
      mathGame.classList.add('hidden');
      playerSelection.classList.remove('hidden');
      currentScreen = 'selection';
      
      if (mathTimerInterval) {
        clearInterval(mathTimerInterval);
      }
      
      document.getElementById('math-game-over').classList.add('hidden');
    });

    backFromBalloon.addEventListener('click', () => {
      balloonGame.classList.add('hidden');
      playerSelection.classList.remove('hidden');
      currentScreen = 'selection';
      
      isBalloonGameOver = true;
      clearInterval(gameInterval);
      clearInterval(timerInterval);
      clearInterval(balloonInterval);
      if (obstacleInterval) clearInterval(obstacleInterval);
      
      balloons.forEach(b => b.element.remove());
      obstacles.forEach(o => o.element.remove());
      balloons = [];
      obstacles = [];
      
      document.getElementById('balloon-game-over').classList.add('hidden');
    });

    async function onConfigChange(config) {
      const app = document.getElementById('app');
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;
      const baseFontStack = 'Arial, sans-serif';
      
      // Selection Screen
      playerSelection.style.background = config.background_color || defaultConfig.background_color;
      
      const welcomeTitle = document.getElementById('welcome-title');
      welcomeTitle.style.fontFamily = `${customFont}, ${baseFontStack}`;
      welcomeTitle.style.fontSize = `${baseSize * 4.375}px`;
      welcomeTitle.style.color = config.selection_text_color || defaultConfig.selection_text_color;
      welcomeTitle.textContent = config.welcome_title || defaultConfig.welcome_title;
      
      document.getElementById('player1-name').textContent = config.player1_name || defaultConfig.player1_name;
      document.getElementById('player2-name').textContent = config.player2_name || defaultConfig.player2_name;
      
      // Math Game
      mathGame.style.background = config.math_bg_color || defaultConfig.math_bg_color;
      
      const mathTitle = document.getElementById('math-title');
      mathTitle.style.fontFamily = `${customFont}, ${baseFontStack}`;
      mathTitle.style.color = config.selection_text_color || defaultConfig.selection_text_color;
      mathTitle.textContent = config.math_game_title || defaultConfig.math_game_title;
      
      backFromMath.style.background = config.button_color || defaultConfig.button_color;
      backFromMath.style.fontFamily = `${customFont}, ${baseFontStack}`;
      
      document.getElementById('math-restart-btn').style.background = config.button_color || defaultConfig.button_color;
      
      // Balloon Game
      balloonGame.style.background = config.balloon_bg_color || defaultConfig.balloon_bg_color;
      
      const balloonTitle = document.getElementById('balloon-title');
      balloonTitle.style.fontFamily = `${customFont}, ${baseFontStack}`;
      balloonTitle.style.color = config.selection_text_color || defaultConfig.selection_text_color;
      balloonTitle.textContent = config.balloon_game_title || defaultConfig.balloon_game_title;
      
      backFromBalloon.style.background = config.button_color || defaultConfig.button_color;
      backFromBalloon.style.fontFamily = `${customFont}, ${baseFontStack}`;
      
      document.getElementById('balloon-restart-btn').style.background = config.button_color || defaultConfig.button_color;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig: defaultConfig,
        onConfigChange: onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.selection_text_color || defaultConfig.selection_text_color,
              set: (value) => {
                config.selection_text_color = value;
                window.elementSdk.setConfig({ selection_text_color: value });
              }
            },
            {
              get: () => config.math_bg_color || defaultConfig.math_bg_color,
              set: (value) => {
                config.math_bg_color = value;
                window.elementSdk.setConfig({ math_bg_color: value });
              }
            },
            {
              get: () => config.balloon_bg_color || defaultConfig.balloon_bg_color,
              set: (value) => {
                config.balloon_bg_color = value;
                window.elementSdk.setConfig({ balloon_bg_color: value });
              }
            },
            {
              get: () => config.button_color || defaultConfig.button_color,
              set: (value) => {
                config.button_color = value;
                window.elementSdk.setConfig({ button_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ["welcome_title", config.welcome_title || defaultConfig.welcome_title],
          ["player1_name", config.player1_name || defaultConfig.player1_name],
          ["player2_name", config.player2_name || defaultConfig.player2_name],
          ["math_game_title", config.math_game_title || defaultConfig.math_game_title],
          ["balloon_game_title", config.balloon_game_title || defaultConfig.balloon_game_title]
        ])
      });
    }

    onConfigChange(defaultConfig);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c7ff60534b6e780',t:'MTc3MDEwMTA4MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
